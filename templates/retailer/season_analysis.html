{% extends 'base.html' %}
  {% load static %}
  {% block title %}
  Seasonal analysis
  {% endblock title %}
  {% block content %}


<div class="card">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      .container {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: flex-start;
        max-width: 800px; /* Limit container width */
        margin: 0 auto; /* Center container */
        padding-top: 20px;
      }
      .column {
        flex-basis: 45%; /* Adjust based on your preference */
        margin: 10px;
      }
      .chart-container {
        margin-bottom: 20px;
      }
    </style>

    <center><h3>Seasonal Analysis</h3></center>
    <div class="container">
    
      <div class="column">
        
        <div class="chart-container">
          <canvas id="winter-chart" width="300" height="200"></canvas>
        </div>
        <div class="chart-container">
          <canvas id="spring-chart" width="300" height="200"></canvas>
        </div>
      </div>
      <div class="column">
        <div class="chart-container">
          <canvas id="summer-chart" width="300" height="200"></canvas>
        </div>
        <div class="chart-container">
          <canvas id="autumn-chart" width="300" height="200"></canvas>
                </div>
      
        <br>
      
</div>
        <a button class="btn btn-primary" type="button" href="/threed_shelf" >3D Shelf</a>

        <a   href="/summer" button class="btn btn-primary">Summer</a>
        <a href="/winter"  button class="btn btn-primary" >Winter</a>
      <a button class="btn btn-primary" href="/spring" >Spring</a>
    <a button class="btn btn-primary"  href="/autumn" >Autumn</a>
      </div>
    </div>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var seasonalData = {
          "Winter": {
            "top_products": {
              "Lip Balm": 2310,
              "Moisturizer": 1430,
              "Hoodies": 865
            }
          },
          "Spring": {
            "top_products": {
              "Floral Perfume": 1870,
              "Body Lotion": 1230,
              "Shower Gel": 1100
            }
          },
          "Summer": {
            "top_products": {
              "Water Bottles": 3750,
              "Soap": 2030,
              "Shampoo": 1570
            }
          },
          "Autumn": {
            "top_products": {
              "Hand Cream": 2770,
              "Face Wash": 1830,
              "Serum": 1085
            }
          }
        };
  
        function renderBarChart(data, canvasId, title) {
          var ctx = document.getElementById(canvasId).getContext('2d');
          var labels = Object.keys(data);
          var values = Object.values(data);
          var chartData = {
            labels: labels,
            datasets: [{
              label: title,
              data: values,
              backgroundColor: ['#5e72e4', '#9b02fa', '#6902fa']
            }]
          };
          var chartOptions = {
            scales: {
              yAxes: [{
                ticks: {
                  beginAtZero: true
                }
              }]
            }
          };
          var barChart = new Chart(ctx, {
            type: 'bar',
            data: chartData,
            options: chartOptions
          });
        }
  
        renderBarChart(seasonalData.Winter.top_products, 'winter-chart', 'Top Products (Winter)');
        renderBarChart(seasonalData.Spring.top_products, 'spring-chart', 'Top Products (Spring)');
        renderBarChart(seasonalData.Summer.top_products, 'summer-chart', 'Top Products (Summer)');
        renderBarChart(seasonalData.Autumn.top_products, 'autumn-chart', 'Top Products (Autumn)');
      });
    </script>
<div class="container">
  <h1>Shelves Data</h1>
  <div class="row">
      {% for season_shelves, details in seasonal_data.items %}
          <div class="col-md-6 mb-4">
              <div class="card">
                  <div class="card-header">
                      <h5 class="card-title">{{ season_shelves }}</h5>
                  </div>
                  <div class="card-body">
                      <div class="row">
                          {% for shelf, products in details.shelves.items %}
                              <div class="col-md-6">
                                  <div class="mb-3">
                                      <h6>{{ shelf }}</h6>
                                      <ul class="list-unstyled">
                                          {% for product in products %}
                                              <li>{{ product }}</li>
                                          {% empty %}
                                              <li>No products</li>
                                          {% endfor %}
                                      </ul>
                                  </div>
                              </div>
                          {% endfor %}
                      </div>
                  </div>
              </div>
          </div>
      {% endfor %}
  </div>
</div>

  </body>
  </html> 
  
{% endblock %}

<!-- 
<script>
function updateChart() {
  var ctx = document.getElementById('chart').getContext('2d');
  if (window.myChart !== undefined) {
      window.myChart.destroy();
  }

  window.myChart = new Chart(ctx, {
      type: 'bar',
      data: {
          labels: ['Positive', 'Negative'],
          datasets: [{
              label: 'Sentiment Distribution',
              data: [
                  {{ summary.positive|default:0 }},
                  {{ summary.negative|default:0 }},
              ],
              backgroundColor: [
                  'rgba(75, 192, 192, 0.2)',
                  'rgba(255, 99, 132, 0.2)',
              ],
              borderColor: [
                  'rgba(75, 192, 192, 1)',
                  'rgba(255, 99, 132, 1)',
              ],
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              y: {
                  beginAtZero: true,
                  max: Math.ceil({{ summary.num_comments }} / 100) * 100,
                  

              }
          },
          plugins: {
              legend: {
                  display: false
              },
              tooltip: {
                  callbacks: {
                      label: function (context) {
                          var label = context.dataset.label || '';
                          if (label) {
                              label += ': ';
                          }
                          if (context.parsed.y !== null) {
                              label += context.parsed.y + ' %';
                          }
                          return label;
                      }
                  }
              }
          }
      }
  });
}

// Call the updateChart function when the document is ready
document.addEventListener('DOMContentLoaded', function () {
  updateChart();
}); -->